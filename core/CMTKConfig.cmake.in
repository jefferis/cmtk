##
##  Copyright 1997-2009 Torsten Rohlfing
##  Copyright 2004-2009 SRI International
##
##  This file is part of the Computational Morphometry Toolkit.
##
##  http://www.nitrc.org/projects/cmtk/
##
##  The Computational Morphometry Toolkit is free software: you can
##  redistribute it and/or modify it under the terms of the GNU General Public
##  License as published by the Free Software Foundation, either version 3 of
##  the License, or (at your option) any later version.
##
##  The Computational Morphometry Toolkit is distributed in the hope that it
##  will be useful, but WITHOUT ANY WARRANTY; without even the implied
##  warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License along
##  with the Computational Morphometry Toolkit.  If not, see
##  <http://www.gnu.org/licenses/>.
##
##  $Revision$
##
##  $LastChangedDate$
##
##  $LastChangedBy$
##

#-----------------------------------------------------------------------------
#
# CMTKConfig.cmake - CMTK CMake configuration file for external projects.
#
# This file is configured by CMTK and used by the UseCMTK.cmake module
# to load CMTK's settings for an external project.

# The CMTK source tree.
# For backward compatibily issues we still need to define this variable, although
# it is highly probable that it will cause more harm than being useful. 
# Use CMTK_INCLUDE_DIRS instead, since CMTK_SOURCE_DIR may point to non-existant directory
IF(NOT CMTK_LEGACY_REMOVE)
  SET(CMTK_SOURCE_DIR "@CMTK_SOURCE_DIR@")
ENDIF(NOT CMTK_LEGACY_REMOVE)

GET_FILENAME_COMPONENT(CMTK_CONFIG_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)
SET(CMTK_INCLUDE_DIR "${CMTK_CONFIG_DIR}/../../include/CMTK")
SET(CMTK_INCLUDE_RELATIVE_DIRS "@CMTK_INCLUDE_RELATIVE_DIRS@")
# The CMTK include file directories.
SET(CMTK_INCLUDE_DIRS "@CMTK_INCLUDE_DIRS_CONFIG@")
# Include the top include directory
SET(CMTK_INCLUDE_DIRS ${CMTK_INCLUDE_DIRS} ${CMTK_INCLUDE_DIR})
FOREACH(DIR ${CMTK_INCLUDE_RELATIVE_DIRS})
  SET(CMTK_INCLUDE_DIRS ${CMTK_INCLUDE_DIRS} ${CMTK_INCLUDE_DIR}/${DIR})
  SET(TOTO  ${CMTK_INCLUDE_DIR}/${DIR})
ENDFOREACH(DIR)

# The CMTK library directories.
# When using a build tree CMTK_CONFIG_DIR has the root of the binary tree and CMTK_LIBRARY_DIRS_CONFIG has "bin".
# When using an installed tree, CMTK_CONFIG_DIR has the directory INSTALL/lib/CMTK and CMTK_LIBRARY_DIRS_CONFIG is empty.
# By composing both variables we construct the right path to the libraries in both cases.
SET(CMTK_LIBRARY_DIRS "${CMTK_CONFIG_DIR}@CMTK_LIBRARY_DIRS_CONFIG@")

# The C and C++ flags added by CMTK to the cmake-configured flags.
SET(CMTK_REQUIRED_C_FLAGS "@CMTK_REQUIRED_C_FLAGS@")
SET(CMTK_REQUIRED_CXX_FLAGS "@CMTK_REQUIRED_CXX_FLAGS@")
SET(CMTK_REQUIRED_LINK_FLAGS "@CMTK_REQUIRED_LINK_FLAGS@")

# The CMTK version number
SET(CMTK_VERSION_MAJOR "@CMTK_VERSION_MAJOR@")
SET(CMTK_VERSION_MINOR "@CMTK_VERSION_MINOR@")
SET(CMTK_VERSION_PATCH "@CMTK_VERSION_PATCH@")

# The location of the UseCMTK.cmake file.
SET(CMTK_USE_FILE "${CMTK_CONFIG_DIR}/@CMTK_USE_FILE@")

# The build settings file.
SET(CMTK_BUILD_SETTINGS_FILE "${CMTK_CONFIG_DIR}/@CMTK_BUILD_SETTINGS_FILE@")

# The library dependencies file.
SET(CMTK_LIBRARY_DEPENDS_FILE "${CMTK_CONFIG_DIR}/@CMTK_LIBRARY_DEPENDS_FILE@")

# Whether CMTK was built with shared libraries.
SET(CMTK_BUILD_SHARED "@BUILD_SHARED_LIBS@")

# A list of all libraries for CMTK.  Those listed here should
# automatically pull in their dependencies.
SET(CMTK_LIBRARIES cmtkBase cmtkIO cmtkPipeline cmtkQt cmtkRegistration cmtkSegmentation cmtkSystem cmtkVTKWrapper)

# The CMTK library dependencies.
IF(NOT CMTK_NO_LIBRARY_DEPENDS AND
    EXISTS "${CMTK_LIBRARY_DEPENDS_FILE}")
  INCLUDE("${CMTK_LIBRARY_DEPENDS_FILE}")
ENDIF(NOT CMTK_NO_LIBRARY_DEPENDS AND
  EXISTS "${CMTK_LIBRARY_DEPENDS_FILE}")
